<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NEXUS-7</title>
  <style>
    :root {
      --bg: #000;
      --text: #0f0;
      --accent: #0f0;
      --card: #111;
      --border: #0f0;
      --error: #f55;
      --glow: 0 0 10px rgba(0,255,0,0.6);
      --scale: 1;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Courier New', monospace;
      font-weight: bold;
      line-height: 1.6;
      padding: 12px;
      overflow: hidden;
      position: relative;
      transform: scale(var(--scale));
      transform-origin: top left;
    }

    /* Boot Screen */
    #bootScreen {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: #000; color: #0f0; display: flex; flex-direction: column;
      justify-content: center; align-items: center; z-index: 999999;
      font-size: 1.2rem; text-align: center;
    }
    .scanline { height: 2px; background: #0f0; width: 0; animation: scanline 2s linear infinite; }
    @keyframes scanline { to { width: 100%; } }

    /* CRT Scanlines */
    .crt::before {
      content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: repeating-linear-gradient(0deg, rgba(0,0,0,0.15), rgba(0,0,0,0.15) 1px, transparent 1px, transparent 2px);
      pointer-events: none; z-index: 9999; opacity: 0; transition: opacity 0.5s;
    }
    .crt.active::before { opacity: 0.3; animation: scan 10s linear infinite; }
    @keyframes scan { 0% { transform: translateY(-100%); } 100% { transform: translateY(100%); } }

    .glow { text-shadow: var(--glow); }
    .container {
      max-width: 960px; margin: auto; background: var(--card); border: 1px solid var(--border);
      border-radius: 8px; overflow: hidden; box-shadow: var(--glow); position: relative; z-index: 1;
    }
    .header { padding: 14px; background: #000; color: var(--text); text-align: center; font-size: 1.3rem; border-bottom: 1px solid var(--border); }

    .input-bar { padding: 12px; display: flex; gap: 8px; background: #000; }
    input { flex: 1; padding: 10px; background: #000; color: var(--text); border: 1px solid var(--border); border-radius: 4px; font-family: inherit; }
    input::placeholder { color: #0a0; }
    button { padding: 8px 12px; background: transparent; color: var(--text); border: 1px solid var(--border); border-radius: 4px; cursor: pointer; font-size: 0.8rem; transition: 0.3s; }
    button:hover { background: var(--accent); color: #000; box-shadow: var(--glow); }

    .viewer {
      width: 100%; height: 580px; border: 1px solid var(--border); border-top: none;
      transition: all 0.3s; position: relative;
    }
    .viewer.fs { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 99999; border: none; border-radius: 0; }

    .info { padding: 8px; font-size: 0.75rem; color: #0a0; text-align: center; background: #000; border-top: 1px solid var(--border); }

    /* Favorites */
    .favorites { padding: 8px; display: flex; gap: 6px; flex-wrap: wrap; background: #000; }
    .fav-btn { padding: 6px 10px; background: transparent; color: #0a0; border: 1px dashed #0a0; border-radius: 4px; font-size: 0.7rem; cursor: pointer; }
    .fav-btn:hover { border: 1px solid var(--accent); color: var(--accent); }

    /* Game Grid */
    .game-grid { padding: 10px; display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 8px; background: #000; max-height: 200px; overflow-y: auto; }
    .game-btn { padding: 8px; background: transparent; color: #0a0; border: 1px dashed #0a0; border-radius: 4px; font-size: 0.7rem; text-align: center; cursor: pointer; }
    .game-btn:hover { border: 1px solid var(--accent); color: var(--accent); }

    /* Console */
    .console {
      position: fixed; bottom: 0; left: 0; width: 100%;
      background: rgba(0,0,0,0.95); color: var(--text);
      padding: 10px; font-size: 0.8rem;
      border-top: 1px solid var(--border);
      z-index: 1000; display: none; max-height: 300px; overflow-y: auto;
    }
    .console.open { display: block; }
    .console-input { width: 100%; background: #000; color: var(--text); border: none; outline: none; font-family: inherit; }
    .log { margin: 2px 0; }

    /* Panels */
    .panel {
      position: fixed; width: 300px; height: 100%; background: #000; color: var(--text);
      padding: 20px; transition: all 0.4s; z-index: 999; border: 1px solid var(--border);
      box-shadow: 0 0 20px rgba(0,255,0,0.3);
    }
    .commands-panel { left: -300px; border-right: 1px solid var(--border); }
    .commands-panel.open { left: 0; }
    .settings-panel { right: -300px; border-left: 1px solid var(--border); }
    .settings-panel.open { right: 0; }
    .close-btn { float: right; font-size: 24px; cursor: pointer; color: #0a0; }

    /* Control Bar */
    .control-bar {
      position: fixed; top: 16px; left: 50%; transform: translateX(-50%);
      display: flex; gap: 8px; z-index: 1001; background: #000; padding: 6px; border: 1px solid var(--border); border-radius: 8px;
    }

    /* Password */
    #passwordOverlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: #000; color: var(--text); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 99999;
      font-size: 1.2rem; text-align: center;
    }
    #passwordInput { margin: 20px; padding: 12px; width: 200px; background: #111; color: var(--text); border: 1px solid var(--border); }

    /* Stealth */
    .stealth * { display: none !important; }
    .stealth .viewer.fs { display: block !important; }
  </style>
</head>
<body class="crt">
  <!-- Boot -->
  <div id="bootScreen">
    <div class="glow">NEXUS-7 v5.5</div>
    <div>BOOTING...</div>
    <div class="scanline"></div>
  </div>

  <!-- Password -->
  <div id="passwordOverlay" style="display:none;">
    <div class="glow">SECURE ACCESS</div>
    <input type="password" id="passwordInput" placeholder="PASSPHRASE" />
    <button onclick="checkPassword()">UNLOCK</button>
    <div style="font-size:0.8rem; color:#0a0; margin-top:10px;">nexus7</div>
  </div>

  <!-- Control Bar -->
  <div class="control-bar" id="controlBar" style="display:none;">
    <button onclick="enterFullscreen()">FS</button>
    <button onclick="exitFullscreen()">EXIT FS</button>
    <button onclick="toggleConsole()">CONSOLE</button>
    <button onclick="toggleCommands()">CMD</button>
    <button onclick="toggleStealth()">STEALTH</button>
    <button onclick="toggleProxy()">PROXY</button>
    <button onclick="toggleSound()">SOUND</button>
    <button onclick="cycleTheme()">THEME</button>
    <button onclick="saveFavorite()">SAVE</button>
    <button onclick="clearConsole()">CLEAR</button>
    <button onclick="showHelp()">HELP</button>
  </div>

  <div class="container" id="mainUI" style="display:none;">
    <div class="header">NEXUS-7 // v5.5</div>
    
    <div class="input-bar">
      <input type="text" id="urlInput" placeholder="> TARGET: " />
      <button onclick="loadSite()">EXECUTE</button>
      <button onclick="openInTab()">TAB</button>
    </div>

    <div class="favorites" id="favoritesBar"></div>
    <div class="game-grid" id="gameGrid"></div>

    <iframe id="siteFrame" class="viewer"></iframe>

    <div class="info">
      DOUBLE-CLICK = FULLSCREEN IFRAME • ALL CONTROLS IN TOP BAR
    </div>
  </div>

  <!-- Console -->
  <div class="console" id="console">
    <div id="consoleOutput"></div>
    <input type="text" class="console-input" id="consoleInput" placeholder="> " />
  </div>

  <!-- Commands Panel -->
  <div class="panel commands-panel" id="commands">
    <div class="close-btn" onclick="toggleCommands()">X</div>
    <h3>COMMANDS</h3>
    <div style="margin:10px 0; padding:8px; border:1px dashed #0a0; border-radius:4px; cursor:pointer;" onclick="executeCmd('clear')"><span style="color:#0f0">clear</span> - Clear console</div>
    <div style="margin:10px 0; padding:8px; border:1px dashed #0a0; border-radius:4px; cursor:pointer;" onclick="executeCmd('proxy')"><span style="color:#0f0">proxy</span> - Toggle proxy</div>
    <div style="margin:10px 0; padding:8px; border:1px dashed #0a0; border-radius:4px; cursor:pointer;" onclick="executeCmd('stealth')"><span style="color:#0f0">stealth</span> - Hide UI</div>
  </div>

  <!-- Settings Panel -->
  <div class="panel settings-panel" id="settings">
    <div class="close-btn" onclick="toggleSettings()">X</div>
    <h3>CONFIG</h3>
    <label><input type="checkbox" id="autoFull" onchange="log('AUTO-FS: ' + this.checked)"> Auto Fullscreen</label><br><br>
    <label><input type="checkbox" id="scanlines" onchange="toggleScanlines()" checked> Scanlines</label><br><br>
    <label><input type="checkbox" id="soundMode" onchange="toggleSound()"> Sound Effects</label>
  </div>

  <script>
    const frame = document.getElementById('siteFrame');
    const input = document.getElementById('urlInput');
    const consoleOutput = document.getElementById('consoleOutput');
    const consoleInput = document.getElementById('consoleInput');
    const mainUI = document.getElementById('mainUI');
    const overlay = document.getElementById('passwordOverlay');
    const controlBar = document.getElementById('controlBar');
    let useProxy = false;
    let proxyIndex = 0;
    const proxies = ['https://api.codetabs.com/v1/proxy?quest=', 'https://api.allorigins.win/raw?url=', 'https://thingproxy.freeboard.io/fetch/'];
    let soundEnabled = false;
    let favorites = JSON.parse(localStorage.getItem('nexusFavs') || '[]');
    let currentTheme = 'hacker';

    // Beep
    function beep(freq = 800, dur = 100) {
      if (!soundEnabled) return;
      const ctx = new AudioContext();
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();
      osc.connect(gain); gain.connect(ctx.destination);
      osc.frequency.value = freq;
      gain.gain.setValueAtTime(0.3, ctx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + dur/1000);
      osc.start(); osc.stop(ctx.currentTime + dur/1000);
    }

    // Log
    function log(msg, type = 'info') {
      const div = document.createElement('div');
      div.className = `log ${type}`;
      div.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
      consoleOutput.appendChild(div);
      consoleOutput.scrollTop = consoleOutput.scrollHeight;
      beep(800, 80);
    }

    // Boot → Password
    setTimeout(() => {
      document.getElementById('bootScreen').style.display = 'none';
      overlay.style.display = 'flex';
    }, 2500);

    // Unlock
    function checkPassword() {
      if (document.getElementById('passwordInput').value === 'nexus7') {
        overlay.style.display = 'none';
        mainUI.style.display = 'block';
        controlBar.style.display = 'flex';
        log('ACCESS GRANTED');
        initGames();
        loadFavorites();
        toggleScanlines();
      } else {
        log('ACCESS DENIED', 'error');
        beep(200, 300);
      }
    }

    // Fullscreen (iframe only)
    function enterFullscreen() {
      frame.classList.add('fs');
      frame.requestFullscreen().catch(() => log('FS BLOCKED', 'error'));
      beep(1000, 150);
    }
    function exitFullscreen() {
      if (document.fullscreenElement) document.exitFullscreen();
      frame.classList.remove('fs');
      beep(600, 100);
    }

    // Load Site
    function loadSite() {
      let url = input.value.trim();
      if (!url) return log('NO TARGET');
      if (!url.startsWith('http')) url = 'https://' + url;
      if (useProxy) url = proxies[proxyIndex] + encodeURIComponent(url);
      frame.src = url;
      log(`LOAD: ${url}`);
      if (document.getElementById('autoFull').checked) setTimeout(enterFullscreen, 800);
    }

    function openInTab() {
      let url = input.value.trim();
      if (!url) return;
      if (!url.startsWith('http')) url = 'https://' + url;
      window.open(useProxy ? proxies[proxyIndex] + encodeURIComponent(url) : url, '_blank');
      log(`TAB: ${url}`);
    }

    // Console
    function toggleConsole() {
      document.getElementById('console').classList.toggle('open');
      beep(900, 100);
    }
    consoleInput.addEventListener('keypress', e => {
      if (e.key === 'Enter') {
        const cmd = consoleInput.value.trim();
        log(`> ${cmd}`);
        executeCmd(cmd);
        consoleInput.value = '';
      }
    });

    function executeCmd(cmd) {
      if (cmd === 'clear') { consoleOutput.innerHTML = ''; log('CLEARED'); }
      else if (cmd === 'proxy') { toggleProxy(); }
      else if (cmd === 'stealth') { toggleStealth(); }
      else log('UNKNOWN CMD');
    }

    // Panels
    function toggleCommands() { document.getElementById('commands').classList.toggle('open'); beep(700, 80); }
    function toggleSettings() { document.getElementById('settings').classList.toggle('open'); beep(700, 80); }

    // Stealth
    function toggleStealth() {
      document.body.classList.toggle('stealth');
      log('STEALTH: ' + (document.body.classList.contains('stealth') ? 'ON' : 'OFF'));
      beep(1100, 150);
    }

    // Proxy
    function toggleProxy() {
      proxyIndex = (proxyIndex + 1) % proxies.length;
      useProxy = true;
      log(`PROXY: ${proxyIndex + 1}`);
      beep(1000, 100);
    }

    // Sound
    function toggleSound() {
      soundEnabled = !soundEnabled;
      log(`SOUND: ${soundEnabled ? 'ON' : 'OFF'}`);
    }

    // Theme
    function cycleTheme() {
      const themes = ['hacker', 'matrix', 'retro'];
      const idx = themes.indexOf(currentTheme);
      currentTheme = themes[(idx + 1) % themes.length];
      applyTheme(currentTheme);
      log(`THEME: ${currentTheme.toUpperCase()}`);
    }
    function applyTheme(theme) {
      if (theme === 'matrix') { document.body.style.setProperty('--text', '#0f0'); document.body.style.background = '#000'; }
      if (theme === 'retro') { document.body.style.setProperty('--text', '#ff0'); document.body.style.background = '#001'; }
    }

    // Favorites
    function saveFavorite() {
      const url = input.value.trim();
      if (!url) return;
      if (!favorites.includes(url)) {
        favorites.unshift(url);
        if (favorites.length > 10) favorites.pop();
        localStorage.setItem('nexusFavs', JSON.stringify(favorites));
        loadFavorites();
        log(`SAVED: ${url}`);
      }
    }
    function loadFavorites() {
      const bar = document.getElementById('favoritesBar');
      bar.innerHTML = '';
      favorites.forEach(url => {
        const btn = document.createElement('div');
        btn.className = 'fav-btn';
        btn.textContent = url.split('/')[2] || 'link';
        btn.onclick = () => { input.value = url; loadSite(); };
        bar.appendChild(btn);
      });
    }

    // Games
    function initGames() {
      const games = [
        {name: 'Slope', url: 'https://slope-game.github.io/'},
        {name: 'Krunker', url: 'https://krunker.io'},
        {name: '1v1.LOL', url: 'https://1v1.lol'},
      ];
      const grid = document.getElementById('gameGrid');
      games.forEach(g => {
        const btn = document.createElement('div');
        btn.className = 'game-btn';
        btn.textContent = g.name;
        btn.onclick = () => { input.value = g.url; loadSite(); };
        grid.appendChild(btn);
      });
    }

    // Scanlines
    function toggleScanlines() {
      const enabled = document.getElementById('scanlines').checked;
      document.body.classList.toggle('active', enabled);
    }

    // Help
    function showHelp() {
      log('NEXUS-7 v5.5 | ALL BUTTONS | NO KEYBINDS');
    }

    function clearConsole() {
      consoleOutput.innerHTML = '';
      log('CONSOLE CLEARED');
    }

    // Double-click iframe
    frame.addEventListener('dblclick', enterFullscreen);

    // Init
    document.getElementById('passwordInput').focus();
  </script>
</body>
</html>
