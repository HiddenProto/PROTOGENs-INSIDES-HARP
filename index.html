<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NEXUS-7</title>
  <style>
    :root {
      --bg: #000;
      --text: #0f0;
      --accent: #0f0;
      --card: #111;
      --border: #0f0;
      --error: #f55;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Courier New', monospace;
      font-weight: bold;
      line-height: 1.6;
      transition: all 0.3s;
      padding: 12px;
      overflow-x: hidden;
      position: relative;
    }
    /* Scanline Effect */
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: repeating-linear-gradient(0deg, rgba(0,0,0,0.15), rgba(0,0,0,0.15) 1px, transparent 1px, transparent 2px);
      pointer-events: none;
      z-index: 9999;
      opacity: 0.3;
      animation: scan 8s linear infinite;
    }
    @keyframes scan { 0% { transform: translateY(-100%); } 100% { transform: translateY(100%); } }

    .container {
      max-width: 960px;
      margin: auto;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 0 20px rgba(0,255,0,0.3);
    }
    .header {
      padding: 16px;
      background: #000;
      color: var(--text);
      text-align: center;
      font-size: 1.4rem;
      border-bottom: 1px solid var(--border);
      text-shadow: 0 0 5px var(--accent);
    }
    .input-bar {
      padding: 16px;
      display: flex;
      gap: 10px;
      align-items: center;
      background: #000;
    }
    input {
      flex: 1;
      padding: 12px;
      font-size: 1rem;
      background: #000;
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 4px;
      font-family: 'Courier New', monospace;
    }
    input::placeholder { color: #0a0; }
    button {
      padding: 12px 18px;
      background: transparent;
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s;
    }
    button:hover {
      background: var(--accent);
      color: #000;
      box-shadow: 0 0 10px var(--accent);
    }
    .viewer {
      width: 100%;
      height: 620px;
      border: 1px solid var(--border);
      border-top: none;
      transition: all 0.3s;
    }
    .info {
      padding: 10px;
      font-size: 0.8rem;
      color: #0a0;
      text-align: center;
      background: #000;
      border-top: 1px solid var(--border);
    }

    /* Presets */
    .presets {
      padding: 8px 16px;
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      background: #000;
    }
    .preset-btn {
      padding: 6px 10px;
      background: transparent;
      color: #0a0;
      border: 1px solid #0a0;
      border-radius: 4px;
      font-size: 0.8rem;
      cursor: pointer;
    }
    .preset-btn:hover { background: #0a0; color: #000; }

    /* Settings */
    .settings-btn {
      position: fixed; right: 16px; top: 16px;
      background: transparent; color: var(--text);
      width: 44px; height: 44px; border-radius: 50%;
      font-size: 24px; cursor: pointer;
      border: 1px solid var(--border);
      display: flex; align-items: center; justify-content: center; z-index: 1000;
      box-shadow: 0 0 10px rgba(0,255,0,0.5);
    }
    .settings-panel {
      position: fixed; right: -300px; top: 0; width: 300px; height: 100%;
      background: #000; color: var(--text);
      padding: 20px; transition: right 0.4s;
      z-index: 999; border-left: 1px solid var(--border);
      box-shadow: -5px 0 20px rgba(0,255,0,0.3);
    }
    .settings-panel.open { right: 0; }
    .close-btn { float: right; font-size: 24px; cursor: pointer; color: #0a0; }
    .setting { margin: 16px 0; }
    label { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; cursor: pointer; }

    /* Debug Panel */
    .debug-panel {
      position: fixed; bottom: 0; left: 0; width: 100%;
      background: rgba(0,0,0,0.9); color: #0f0;
      padding: 10px; font-size: 0.8rem;
      border-top: 1px solid var(--border);
      z-index: 1000; display: none;
      max-height: 200px; overflow-y: auto;
      font-family: 'Courier New', monospace;
    }
    .debug-panel.open { display: block; }
    .debug-log { margin: 4px 0; }
    .error { color: var(--error); }

    /* Stealth Mode */
    .stealth .input-bar, .stealth .presets, .stealth .info, .stealth .header { display: none !important; }
    .stealth .viewer { border: none; height: 100vh; border-radius: 0; }
  </style>
</head>
<body>
  <div class="settings-btn" onclick="toggleSettings()">Gear</div>

  <div class="container">
    <div class="header">NEXUS-7 // SYSTEM ONLINE</div>
    
    <div class="input-bar">
      <input type="text" id="urlInput" placeholder="> TARGET: " />
      <button onclick="loadSite()">EXECUTE</button>
      <button onclick="openInTab()" style="background:transparent; border:1px solid #0f0;">NEW TAB</button>
    </div>

    <div class="presets">
      <div class="preset-btn" onclick="loadPreset('coolmathgames.com')">CMATH</div>
      <div class="preset-btn" onclick="loadPreset('poki.com')">POKI</div>
      <div class="preset-btn" onclick="loadPreset('krunker.io')">KRUNK</div>
      <div class="preset-btn" onclick="loadPreset('wikipedia.org')">WIKI</div>
    </div>

    <iframe id="siteFrame" class="viewer"
      sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-modals allow-top-navigation allow-top-navigation-by-user-activation"
      allow="fullscreen autoplay encrypted-media picture-in-picture"
      loading="lazy">
    </iframe>

    <div class="info">
      DBLCLICK = FULLSCREEN • ESC = EXIT • CTRL+SHIFT+D = DEBUG
    </div>
  </div>

  <!-- Settings Panel -->
  <div class="settings-panel" id="settings">
    <div class="close-btn" onclick="toggleSettings()">X</div>
    <h3>SYSTEM CONFIG</h3>
    <div class="setting">
      <label><input type="checkbox" id="rainbowMode" onchange="toggleRainbow()"> SCANLINES</label>
    </div>
    <div class="setting">
      <label><input type="checkbox" id="darkMode" onchange="toggleDark()"> NIGHT MODE (ON)</label>
    </div>
    <div class="setting">
      <label><input type="checkbox" id="borderless" onchange="toggleBorder()"> BORDER OFF</label>
    </div>
    <div class="setting">
      <label><input type="checkbox" id="autoFull" onchange="toggleAutoFull()"> AUTO-FS</label>
    </div>
  </div>

  <!-- Debug Panel -->
  <div class="debug-panel" id="debugPanel">
    <div style="margin-bottom:8px; color:#0f0;">NEXUS-7 DEBUG LOG // <span id="status">IDLE</span></div>
    <div id="logContainer"></div>
  </div>

  <script>
    const frame = document.getElementById('siteFrame');
    const body = document.body;
    const input = document.getElementById('urlInput');
    const debugPanel = document.getElementById('debugPanel');
    const logContainer = document.getElementById('logContainer');
    const status = document.getElementById('status');
    let history = JSON.parse(localStorage.getItem('nexusHistory') || '[]');

    // Log Function
    function log(msg, type = 'info') {
      const div = document.createElement('div');
      div.className = `debug-log ${type}`;
      div.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
      logContainer.appendChild(div);
      logContainer.scrollTop = logContainer.scrollHeight;
      if (logContainer.children.length > 50) logContainer.removeChild(logContainer.children[0]);
    }

    function loadSite() {
      let url = input.value.trim();
      if (!url) return log('NO TARGET', 'error');
      if (!url.startsWith('http')) url = 'https://' + url;
      
      const start = performance.now();
      status.textContent = 'LOADING...';
      log(`EXECUTE: ${url}`);
      
      frame.src = url;
      
      frame.onload = () => {
        const loadTime = ((performance.now() - start) / 1000).toFixed(2);
        status.textContent = 'ONLINE';
        log(`LOADED in ${loadTime}s`, 'success');
        addToHistory(url);
      };
      
      frame.onerror = () => {
        status.textContent = 'ERROR';
        log(`FAILED: ${url}`, 'error');
      };
      
      if (document.getElementById('autoFull').checked) {
        setTimeout(() => frame.requestFullscreen(), 1000);
      }
    }

    function openInTab() {
      let url = input.value.trim();
      if (!url) return log('NO TARGET', 'error');
      if (!url.startsWith('http')) url = 'https://' + url;
      window.open(url, '_blank');
      log(`OPEN TAB: ${url}`);
    }

    function loadPreset(site) {
      input.value = site;
      loadSite();
    }

    function addToHistory(url) {
      if (!history.includes(url)) {
        history.unshift(url);
        if (history.length > 5) history.pop();
        localStorage.setItem('nexusHistory', JSON.stringify(history));
      }
    }

    // Enter key
    input.addEventListener('keypress', e => {
      if (e.key === 'Enter') loadSite();
    });

    // Fullscreen
    frame.addEventListener('dblclick', () => frame.requestFullscreen());
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape' && document.fullscreenElement) document.exitFullscreen();
    });

    // Settings
    function toggleSettings() {
      document.getElementById('settings').classList.toggle('open');
    }

    function toggleRainbow() {
      const enabled = document.getElementById('rainbowMode').checked;
      body.style.background = enabled ? 'linear-gradient(45deg, #000, #111)' : '#000';
      body.style.backgroundSize = enabled ? '400% 400%' : '';
      if (enabled) body.style.animation = 'rainbow 20s ease infinite';
      else body.style.animation = '';
    }

    function toggleDark() {
      const enabled = document.getElementById('darkMode').checked;
      body.setAttribute('data-theme', enabled ? 'dark' : '');
      localStorage.setItem('darkMode', enabled);
    }

    function toggleBorder() {
      frame.style.border = document.getElementById('borderless').checked ? 'none' : '';
    }

    function toggleAutoFull() {}

    // Keyboard Shortcuts
    document.addEventListener('keydown', e => {
      if (e.ctrlKey && e.shiftKey) {
        if (e.key === 'D') {
          debugPanel.classList.toggle('open');
          log('DEBUG PANEL TOGGLED');
        }
        if (e.key === 'S') {
          document.body.classList.toggle('stealth');
          log('STEALTH MODE: ' + (document.body.classList.contains('stealth') ? 'ON' : 'OFF'));
        }
      }
      if (e.key === 'F11') {
        e.preventDefault();
        if (!document.fullscreenElement) document.documentElement.requestFullscreen();
        else document.exitFullscreen();
      }
    });

    // Load settings
    if (localStorage.getItem('darkMode') === 'true') {
      document.getElementById('darkMode').checked = true;
      toggleDark();
    }

    // Init
    log('NEXUS-7 BOOTED');
    status.textContent = 'READY';
  </script>
</body>
</html>
